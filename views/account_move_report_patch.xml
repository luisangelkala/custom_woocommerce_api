<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <template id="report_invoice_document_patch" inherit_id="account.report_invoice_document" priority="99">
        
        <!-- Cambiar título a "Devis" para borradores -->
        <xpath expr="//h2" position="replace">
            <h2>
                <span t-if="o.move_type == 'out_invoice' and o.state == 'posted'">Facture</span>
                <span t-elif="o.move_type == 'out_invoice'">Devis</span>
                <span t-elif="o.move_type == 'out_refund'">Avoir</span>
                <span t-elif="o.move_type == 'in_refund'">Avoir Fournisseur</span>
                <span t-elif="o.move_type == 'in_invoice'">Facture Fournisseur</span>
            </h2>
        </xpath>

        <!-- Traducir solo los headers que existen -->
        <xpath expr="//table[@name='invoice_line_table']//thead" position="replace">
            <thead>
                <tr>
                    <th name="th_description" class="text-start"><span>Produit</span></th>
                    <th name="th_quantity" class="text-end"><span>Quantité</span></th>
                    <th name="th_priceunit" class="text-end"><span>Prix</span></th>
                    <th name="th_discount" class="text-end" groups="product.group_discount_per_so_line"><span>Disc.%</span></th>
                    <th name="th_tax" t-if="display_discount" class="text-end" groups="account.group_show_line_subtotals_tax_excluded"><span>Taxes</span></th>
                    <th name="th_subtotal" class="text-end">
                        <span groups="account.group_show_line_subtotals_tax_excluded">Montant</span>
                        <span groups="account.group_show_line_subtotals_tax_included">Total</span>
                    </th>
                </tr>
            </thead>
        </xpath>

    </template>
</odoo>